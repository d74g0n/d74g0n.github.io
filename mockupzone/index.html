<!DOCTYPE html>
<html>

<head>
    <title>Quick Mockup</title>


    <!--        <link rel="stylesheet" type="text/css" href="/datafag/css/newslogo.css" />-->
    <!--        <script src="/datafag/clownfilter.js"></script>-->
    <style>
        body {
            background: black;
            color: white;
        }

        canvas {
            height: 300px;
            width: 300px;
            border: 2px solid gold;
        }
    </style>




</head>

<body>
    <center>
        <canvas id="mockupzone"></canvas>
    </center>
    <script src="/perlin_skyline/skylinectx.js"></script>
    <script>
        const canvas = document.getElementById('mockupzone');
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;
        canvas.width = 300;
        canvas.height = 300;

        let horizonY = canvas.height * .7;
        background(gradientV());





        function car(x, y) {
            let oy = y;
            
            y-=5;
            
            
            setColor('black');
            ctx.strokeStyle = 'black';
            ctx.fillStyle = 'black';

            
            //body
            drawRect(x-6, y, 6, 4);
            drawRect(x-9, y+1, 11, 2);
            //window
            setColor('yellow');
            drawRect(x-5, y+0.5, 3, 1);
            
            
            //wheels
            setColor('black');
            fillCircle(x,y+4,1.5,'black');
            fillCircle(x-7,y+4,1.5,'black');
            
            //lights - can flicker with (.75=on vs .50=dim af)
            fillCircle(x+1,y+2,.75,'red');
            ctx.shadowBlur = 1;
            ctx.shadowColor = 'white';
            fillCircle(x-8,y+2,.75,'white');
            ctx.shadowBlur = 0
            ctx.shadowColor = 'transparent';



        }









        function RandomPalmTrees(horz) {
            // TODO perspective roll by bent R to C to L mock perspective.
            // also perlin height width +1's leafts lengths etc.

            function drawleaf(x, y) {
                x += 2;
                let leftA = RNDNum(-1, 1);
                let leftB = RNDNum(-1, 1);

                let oy = y;

                y += leftA;
                ctx.strokeStyle = 'green';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(x - 5, y);
                ctx.arcTo(x, y, x + 5, y + 8, 5 + leftA);
                ctx.lineTo(x + 5, y + 8);
                ctx.stroke();

                y = oy + leftB;
                ctx.moveTo(x + 5, y);
                ctx.arcTo(x, y, x - 5, y + 8, 5 + leftB);
                ctx.lineTo(x - 5, y + 8);
                ctx.stroke();
                ctx.strokeStyle = 'transparent';
            }

            for (let x = 0; x < canvas.width; x += 25) {
                let w = 5;
                let baseoffset = RNDNum(-6, 6);
                let midoffset = RNDNum(baseoffset, baseoffset + 4);
                let topoffset = RNDNum(midoffset, midoffset + 4);
                setColor('black');
                drawRect(x + baseoffset, horz - 7, w--, 7);
                drawRect(x + midoffset, horz - 14, w--, 7);
                drawRect(x + topoffset, horz - 21, w--, 7);
                drawleaf(x + topoffset, horz - 21);
            }



        }

        function Moon(x, y) {
            ctx.lineWidth = 0;
            ctx.strokeStyle = 'transparent';
            ctx.fillStyle = 'white';
            setColor('white');
            ctx.shadowBlur = 8;
            ctx.shadowColor = 'skyblue';

            fillCircle(x, y, 10, 'rgba(255,255,255,1)');
            fillCircle(x, y - .5, 8, 'rgba(255,255,255,0.8)');

            ctx.shadowBlur = 0;
            ctx.shadowColor = 'none';

        }

        let S = {
            l: 25,
            r: canvas.width - 25,
            t: 25,
            b: (canvas.height * 0.7) - 40,
        }

        function WIP() {
            background(gradientV());
            RandomPalmTrees(horizonY);
            Moon(RNDNum(S.l, S.r), RNDNum(S.t, S.b));
            setColor('black');
            drawRect(0, canvas.height * 0.7, canvas.width, canvas.height);
            
            
            car(RNDNum(0,canvas.width), horizonY);
        }

                setInterval(WIP, 1000 / 2);






//        WIP();

        

        //        drawCurve(1,2);
    </script>


</body></html>
