<!DOCTYPE html>
<html>

<head>
    <title>gridEditor</title>
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0">
    <meta name="description" content="I AM d74g0n!">
    <meta name="keywords" content="d74g0n">
    <meta name="robots" content="noarchive" />
    <meta charset="UTF-8">
    <meta name="author" content="d74g0n">
    <meta property="og:image" content="index.png">
    <meta name="twitter:image" content="index.png">
    <link rel="shortcut icon" href="/common/img/favicon.ico" />

    <style>
        @font-face {
            font-family: '8bitO';
            src: url('/common/fonts/8bitOperatorPlus-Regular.ttf');
        }

        * {
            font-family: '8bitO';
        }

        body {
            background: black;
            /*            color: #00aeba;*/
        }

        canvas {
            /*
            
            display: inline-block;
            position: fixed;
*/

            border: 2px solid white;
        }

        #btns {
            padding: 0;
            margin: 0;
            width: 100px;
        }

        #coord {
            color: gold;
        }

        #solve {
            color: #00aeba;
            height: 4em;
            overflow: hidden;
            /*            height: 440px;*/
        }


        #mainscreen {
            border: 2px solid white;
            align-self: center;
            display: block;
            margin: auto;
            padding: auto;
/*
            height: 50%;
            width: 50%;
*/
/*             float: left;*/

        }

        #tilechoice {
            /*            border: 2px solid grey;*/
/*                        float: right;*/
            margin-left: 20px;
        }

        #spritecanvas {
            /*        display: inline-block;*/

            /*
            width: 768;
            height: 368;
             position: inherit;
*/

        }

        hr {
            width: 200px;
        }
    </style>
</head>

<body>
    


    <center>
        <canvas id="tilechoice"></canvas>
        <canvas id="mainscreen"></canvas>
    </center>
<center><canvas id="spritecanvas"></canvas></center>
    <script src="/games/common/drawing.js"></script>
    <script src="/games/common/_Math.js"></script>
    <script>
        const canvas = document.getElementById("mainscreen");
        const ctx = canvas.getContext("2d");
        ctx.imageSmoothingEnabled = false;



        //            const winnoise = loadAudio('/DMT/audio/transit.mp3');
    </script>
    <script src="grid.js"></script>
    <script src="gridEditor.js"></script>
    <!--        <br>-->




    <script>
        const tanvas = document.getElementById("tilechoice");
        const ttx = tanvas.getContext("2d");
        //            canvas.height = 1080;
        tanvas.height = 128;
        //            canvas.width = 1920;
        tanvas.width = 128;
        ttx.imageSmoothingEnabled = false;
    </script>
    <script src="myTile.js"></script>


    <script>
        const sanvas = document.getElementById("spritecanvas");
        const stx = sanvas.getContext("2d");

        function loadImage(path) {
            let image = new Image();
            image.src = path;
            image.onload = function() {
                stx.drawImage(this, 0, 0, this.width, this.height, 0, 0, sanvas.width, sanvas.height, );
            };
            return image;
        }

        let spritesheet = loadImage(`/games/tileparty/img/Voirol.png`)

        sanvas.width = spritesheet.width;
        sanvas.height = spritesheet.height;

        sanvas.onclick = function(evt) {
            var rect = canvas.getBoundingClientRect();
            let pos = {
                x: evt.layerX,
                y: evt.layerY,
                scale: (spritesheet.width / 48),
                scaleH: (spritesheet.height / 22),
            };
            
            let coord = [Math.floor(pos.x/pos.scale),Math.floor(pos.y/pos.scale)];
            
            myTile.x = coord[0];
            myTile.y = coord[1];
            ttx.clearRect(0,0,tanvas.width,tanvas.height);
            myTile.draw();
            
            console.log(`sanvas[${Math.floor(pos.x/pos.scale)},${Math.floor(pos.y/pos.scale)}]`);
//            console.log(evt);

            stx.drawImage(spritesheet,0,0);
            
            stx.save();
            stx.beginPath();
            stx.lineWidth = 1;
            stx.strokeStyle = 'white';
            stx.strokeRect(coord[0]*pos.scale, coord[1]*pos.scale, pos.scale, pos.scale);
            stx.stroke();
            stx.closePath();
            stx.restore();

        }
    </script>



</body></html>
